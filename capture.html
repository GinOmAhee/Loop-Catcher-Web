<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thought Capture</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      height: 100vh;
      background-color: #f0f0f0;
      transition: background-color 0.3s;
    }

    #main {
      margin: auto;
      width: 100%;
      max-width: 800px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    textarea {
      width: 100%;
      height: 300px;
      padding: 15px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      resize: none;
    }

    #controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
    }

    button {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #previewOverlay {
      position: fixed;
      left: 0;
      top: 0;
      height: 100%;
      width: 350px;
      background: white;
      border-right: 2px solid #ccc;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      overflow-y: auto;
      padding: 20px;
      display: none;
      flex-direction: column;
      z-index: 999;
    }

    #previewToggle {
      position: absolute;
      left: 10px;
      top: 10px;
      padding: 5px 10px;
      z-index: 1000;
    }

    #savedTime {
      margin-top: 10px;
      font-size: 14px;
      color: gray;
    }

    .mood-happy {
      background-color: #fffbe6;
    }

    .mood-sad {
      background-color: #e6f0ff;
    }

    .mood-angry {
      background-color: #ffe6e6;
    }
  </style>
</head>
<body>
  <button id="previewToggle">☰ Preview</button>
  <div id="previewOverlay">
    <h3>🔍 Search   🔽 Group by: [Date ▼]</h3>
    <hr>
    <p>🗓️ <strong>Today</strong></p>
    <ul>
      <li>✏️ “Instagram carousel hook idea…”</li>
      <li>🎨 Sketch: “Self-trust visual map”</li>
    </ul>
    <p>🗓️ <strong>This Week</strong></p>
    <ul>
      <li>🤖 “How to automate feedback loop…”</li>
      <li>🧠 Brainstorm: Book subtitle variants</li>
    </ul>
    <p>🗂️ <strong>Group by: [📌 Project]</strong></p>
    <p>🔁 AI Suggests: “Relevant to: Ginomahee”</p>
    <ul>
      <li>✍️ “Does This Resonate? prompt idea”</li>
      <li>🎨 Wireframe sketch: Self-awareness UI</li>
    </ul>
    <p>✨ “Show me my last 5 unresolved ideas”</p>
    <p>🔁 “Resurface forgotten ideas every X days”</p>
  </div>
  <div id="main">
    <textarea id="thoughtBox" placeholder="Write your thoughts here..."></textarea>
    <div id="controls">
      <button onclick="saveThought()">💾 Save</button>
      <button onclick="startVoiceCapture()">🎤 Voice</button>
      <select id="moodSelect" onchange="changeMood()">
        <option value="">Select Mood</option>
        <option value="happy">😊 Happy</option>
        <option value="sad">😢 Sad</option>
        <option value="angry">😡 Angry</option>
      </select>
    </div>
    <div id="savedTime"></div>
  </div>

  <script>
    const preview = document.getElementById("previewOverlay");
    document.getElementById("previewToggle").onclick = () => {
      preview.style.display = preview.style.display === "flex" ? "none" : "flex";
    };

    function saveThought() {
      const now = new Date();
      document.getElementById("savedTime").innerText = `Saved at ${now.toLocaleTimeString()}`;
    }

    function changeMood() {
      const mood = document.getElementById("moodSelect").value;
      document.body.className = mood ? `mood-${mood}` : '';
    }

    function startVoiceCapture() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.start();

      recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        document.getElementById("thoughtBox").value += transcript + " ";
      };

      recognition.onerror = function(event) {
        alert('Voice capture failed: ' + event.error);
      };
    }
  </script>
</body>
</html>
